<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, orientation=portrait">
    
    <!-- SEO Meta Tags -->
    <title>PhotoBooth - Ch·ª•p ·∫£nh online v·ªõi hi·ªáu ·ª©ng ƒë·∫πp | L∆∞u gi·ªØ kho·∫£nh kh·∫Øc</title>
    <meta name="description" content="PhotoBooth online mi·ªÖn ph√≠ v·ªõi nhi·ªÅu hi·ªáu ·ª©ng ƒë·∫πp, b·ªô l·ªçc magical v√† ch·∫ø ƒë·ªô ch·ª•p ƒëa d·∫°ng. Ch·ª•p ·∫£nh ƒë∆°n, gh√©p ·∫£nh, d·∫£i film ngay tr√™n tr√¨nh duy·ªát.">
    <meta name="keywords" content="photobooth, ch·ª•p ·∫£nh online, hi·ªáu ·ª©ng ·∫£nh, b·ªô l·ªçc ·∫£nh, gh√©p ·∫£nh, camera online, ch·ª•p ·∫£nh mi·ªÖn ph√≠">
    <meta name="author" content="c.nhoa">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph Meta Tags for Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="PhotoBooth - Ch·ª•p ·∫£nh online v·ªõi hi·ªáu ·ª©ng ƒë·∫πp">
    <meta property="og:description" content="·ª®ng d·ª•ng PhotoBooth online mi·ªÖn ph√≠ v·ªõi nhi·ªÅu hi·ªáu ·ª©ng magical, b·ªô l·ªçc ƒë·∫πp v√† ch·∫ø ƒë·ªô ch·ª•p ƒëa d·∫°ng.">
    <meta property="og:image" content="https://chunhanhoa.github.io/PhotoBooth/images/photobooth-preview.jpg">
    <meta property="og:url" content="https://chunhanhoa.github.io/PhotoBooth/">
    <meta property="og:site_name" content="PhotoBooth">
    <meta property="og:locale" content="vi_VN">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="PhotoBooth - Ch·ª•p ·∫£nh online v·ªõi hi·ªáu ·ª©ng ƒë·∫πp">
    <meta name="twitter:description" content="·ª®ng d·ª•ng PhotoBooth online mi·ªÖn ph√≠ v·ªõi nhi·ªÅu hi·ªáu ·ª©ng magical v√† b·ªô l·ªçc ƒë·∫πp.">
    <meta name="twitter:image" content="https://chunhanhoa.github.io/PhotoBooth/images/photobooth-preview.jpg">
    <meta name="twitter:creator" content="@c_nhoa">
    
    <!-- Additional SEO Meta Tags -->
    <meta name="theme-color" content="#ff7eb9">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="PhotoBooth">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://chunhanhoa.github.io/PhotoBooth/">
    
    <!-- Google Site Verification -->
    <meta name="google-site-verification" content="39df57f868aa5aa6">
    
    <!-- Existing head content -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üì∏</text></svg>">
    
    <!-- CSS ƒë·ªÉ fix orientation tr√™n mobile -->
    <style>
        /* Fix video orientation tr√™n mobile */
        @media screen and (max-width: 768px) {
            #camera {
                width: 100% !important;
                height: auto !important;
                object-fit: cover !important;
                transform-origin: center center !important;
            }
            
            .camera-container {
                width: 100% !important;
                max-width: 100% !important;
                aspect-ratio: 9/16 !important;
            }
            
            /* Force portrait mode */
            @media screen and (orientation: landscape) {
                body::before {
                    content: "üîÑ Vui l√≤ng xoay ƒëi·ªán tho·∫°i ƒë·ªÉ c√≥ tr·∫£i nghi·ªám t·ªët nh·∫•t!";
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.9);
                    color: white;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 9999;
                    font-size: 18px;
                    text-align: center;
                    padding: 20px;
                }
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>PhotoBooth<i class="fas fa-camera-retro"></i></h1>
            <p>L∆∞u gi·ªØ kho·∫£nh kh·∫Øc ƒë·∫πp c·ªßa b·∫°n</p>
        </header>
        
        <main>
            <div class="booth">
                <div class="camera-container">
                    <video id="camera" autoplay></video>
                    <canvas id="canvas" style="display: none;"></canvas>
                    <div class="flash"></div>
                    <div id="countdown" class="countdown"></div>
                    <div class="camera-overlay">
                        <div class="camera-frame"></div>
                    </div>
                    <div class="stickers-preview" id="stickers-preview"></div>
                    
                    <!-- ƒêi·ªÅu khi·ªÉn zoom cho camera tr√™n mobile -->
                    <div class="camera-zoom-controls">
                        <button class="zoom-btn" id="zoom-in" title="Ph√≥ng to"><i class="fas fa-search-plus"></i></button>
                        <button class="zoom-btn" id="zoom-out" title="Thu nh·ªè"><i class="fas fa-search-minus"></i></button>
                    </div>
                </div>
                
                <div class="controls">
                    <button id="capture" class="btn btn-primary">
                        <i class="fas fa-camera"></i> 
                        <span>Ch·ª•p ·∫£nh</span>
                    </button>
                    <button id="download" class="btn btn-success" disabled>
                        <i class="fas fa-download"></i> 
                        <span>T·∫£i v·ªÅ</span>
                    </button>
                    <button id="retake" class="btn btn-secondary" style="display: none;">
                        <i class="fas fa-redo"></i> 
                        <span>Ch·ª•p l·∫°i</span>
                    </button>
                    <button id="collage" class="btn btn-info">
                        <i class="fas fa-th-large"></i> 
                        <span>Gh√©p ·∫£nh</span>
                    </button>
                </div>
                
                <div class="mode-selector">
                    <div class="mode-title">Ch·∫ø ƒë·ªô ch·ª•p:</div>
                    <div class="mode-options">
                        <label class="mode-option">
                            <input type="radio" name="mode" value="single" checked> 
                            <span class="mode-icon"><i class="fas fa-portrait"></i></span>
                            <span>·∫¢nh ƒë∆°n</span>
                        </label>
                        <label class="mode-option">
                            <input type="radio" name="mode" value="side_by_side"> 
                            <span class="mode-icon"><i class="fas fa-images"></i></span>
                            <span>ƒê√¥i b·∫°n</span>
                        </label>
                        <label class="mode-option">
                            <input type="radio" name="mode" value="collage_2x2"> 
                            <span class="mode-icon"><i class="fas fa-th-large"></i></span>
                            <span>B·ªô 4</span>
                        </label>
                        <label class="mode-option">
                            <input type="radio" name="mode" value="collage_3x3"> 
                            <span class="mode-icon"><i class="fas fa-th"></i></span>
                            <span>B·ªô 9</span>
                        </label>
                        <label class="mode-option">
                            <input type="radio" name="mode" value="strip"> 
                            <span class="mode-icon"><i class="fas fa-film"></i></span>
                            <span>D·∫£i film</span>
                        </label>
                    </div>
                </div>
                
               <div class="filters-container">
                    <div class="filters-title">B·ªô l·ªçc magical:</div>
                    <div class="filters">
                        <button class="filter-btn active" data-filter="normal">
                            <div class="filter-preview normal">
                                <span class="filter-icon">‚ú®</span>
                            </div>
                            <span>T·ª± nhi√™n</span>
                        </button>
                        <button class="filter-btn" data-filter="grayscale">
                            <div class="filter-preview grayscale">
                                <span class="filter-icon">‚ö´</span>
                            </div>
                            <span>C·ªï ƒëi·ªÉn</span>
                        </button>
                        <button class="filter-btn" data-filter="sepia">
                            <div class="filter-preview sepia">
                                <span class="filter-icon">üèõÔ∏è</span>
                            </div>
                            <span>Ho√†i c·ªï</span>
                        </button>
                        <button class="filter-btn" data-filter="invert">
                            <div class="filter-preview invert">
                                <span class="filter-icon">üé≠</span>
                            </div>
                            <span>Ngh·ªá thu·∫≠t</span>
                        </button>
                        <button class="filter-btn" data-filter="vintage">
                            <div class="filter-preview vintage">
                                <span class="filter-icon">üì∑</span>
                            </div>
                            <span>Vintage</span>
                        </button>
                        <button class="filter-btn" data-filter="pastel">
                            <div class="filter-preview pastel">
                                <span class="filter-icon">üå∏</span>
                            </div>
                            <span>Pastel</span>
                        </button>
                        <button class="filter-btn" data-filter="cute">
                            <div class="filter-preview cute">
                                <span class="filter-icon">üíñ</span>
                            </div>
                            <span>Si√™u cute</span>
                        </button>
                    </div>
                </div>
                
                
                <div id="collage-preview" class="collage-preview" style="display: none;">
                    <h3>Gh√©p ·∫£nh si√™u ƒë·∫πp c·ªßa b·∫°n</h3>
                    <div class="collage-container" id="collage-container"></div>
                    <div class="collage-controls">
                        <button id="finish-collage" class="btn btn-success">
                            <i class="fas fa-check"></i> Ho√†n th√†nh masterpiece
                        </button>
                        <button id="cancel-collage" class="btn btn-danger">
                            <i class="fas fa-times"></i> B·ªè qua
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="gallery">
                <h2> B·ªô s∆∞u t·∫≠p ·∫£nh ƒë·∫πp <i class="fas fa-images"></i></h2>
                <div id="photos" class="photos-container"></div>
            </div>
        </main>
        
        <footer>
            <p>¬© 2025 PhotoBooth - <a href="https://www.instagram.com/c.nhoa/" target="_blank">c.nhoa</a></p>
        </footer>
    </div>

    <script src="script.js"></script>
    <script>
    // Auto start camera khi load trang - T·ªëi ∆∞u cho mobile
    window.addEventListener('load', function() {
        // Ki·ªÉm tra v√† force portrait tr√™n mobile
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        if (isMobile) {
            // Kh√≥a orientation v·ªÅ portrait
            if (screen.orientation && screen.orientation.lock) {
                screen.orientation.lock('portrait').catch(e => {
                    console.log('Kh√¥ng th·ªÉ kh√≥a orientation:', e);
                });
            }
            
            // Th√¥ng b√°o y√™u c·∫ßu xoay ƒëi·ªán tho·∫°i
            if (window.innerWidth > window.innerHeight) {
                document.body.style.overflow = 'hidden';
            }
        }
        
        // ƒê·ª£i ƒë·ªÉ ƒë·∫£m b·∫£o t·∫•t c·∫£ ƒë√£ load xong
        setTimeout(() => {
            if (window.startCamera) {
                window.startCamera();
            }
        }, 300); // Gi·∫£m delay ƒë·ªÉ tƒÉng t·ªëc
    });

    // Enhanced mobile functionality v·ªõi hi·ªáu su·∫•t cao h∆°n
    document.addEventListener('DOMContentLoaded', function() {
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        const isTablet = /iPad|Android(?!.*Mobile)/i.test(navigator.userAgent);
        
        if (isMobile && !isTablet) {
            document.body.classList.add('mobile');
            
            console.log('üì± Mobile detected - Optimizing for 9:16 portrait mode');
            
            // T·ªëi ∆∞u hi·ªáu su·∫•t: T·∫Øt animations kh√¥ng c·∫ßn thi·∫øt
            const reduceAnimations = document.createElement('style');
            reduceAnimations.textContent = `
                @media (max-width: 768px) {
                    * {
                        animation-duration: 0.3s !important;
                        transition-duration: 0.2s !important;
                    }
                    
                    .booth::before, .booth::after {
                        display: none !important;
                    }
                    
                    body::before {
                        animation: none !important;
                    }
                }
            `;
            document.head.appendChild(reduceAnimations);
            
            // Force camera constraints cho mobile 9:16
            const originalGetUserMedia = navigator.mediaDevices.getUserMedia;
            navigator.mediaDevices.getUserMedia = function(constraints) {
                if (constraints.video) {
                    constraints.video = {
                        facingMode: { ideal: "user" },
                        width: { ideal: 720, max: 1080 },
                        height: { ideal: 1280, max: 1920 },
                        aspectRatio: { ideal: 9/16, exact: 9/16 },
                        frameRate: { ideal: 24, max: 30 }
                    };
                }
                return originalGetUserMedia.call(this, constraints);
            };
            
            // Enhanced zoom controls - touch friendly
            const zoomControls = document.querySelector('.camera-zoom-controls');
            if (zoomControls) {
                zoomControls.style.display = 'flex';
                
                const zoomIn = document.getElementById('zoom-in');
                const zoomOut = document.getElementById('zoom-out');
                const camera = document.getElementById('camera');
                
                let scale = 1;
                
                function updateCameraTransform() {
                    const isFlipped = window.isFlipped || true;
                    if (isFlipped) {
                        camera.style.transform = `scaleX(-1) scale(${scale})`;
                    } else {
                        camera.style.transform = `scale(${scale})`;
                    }
                }
                
                zoomIn.addEventListener('click', function() {
                    scale = Math.min(scale + 0.2, 3); // TƒÉng b∆∞·ªõc zoom
                    updateCameraTransform();
                    this.style.transform = 'scale(1.2)';
                    setTimeout(() => this.style.transform = 'scale(1)', 150);
                });
                
                zoomOut.addEventListener('click', function() {
                    scale = Math.max(scale - 0.2, 0.8);
                    updateCameraTransform();
                    this.style.transform = 'scale(1.2)';
                    setTimeout(() => this.style.transform = 'scale(1)', 150);
                });
            }
            
            // Th√¥ng b√°o welcome t·ªëi ∆∞u
            setTimeout(() => {
                const welcome = document.createElement('div');
                welcome.innerHTML = 'üì± Camera ƒë√£ t·ªëi ∆∞u cho ƒëi·ªán tho·∫°i!';
                welcome.style.cssText = `
                    position: fixed;
                    top: 20px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: var(--primary-color);
                    color: white;
                    padding: 10px 20px;
                    border-radius: 25px;
                    font-size: 14px;
                    font-weight: 600;
                    z-index: 1000;
                    animation: slideDown 0.5s ease;
                `;
                document.body.appendChild(welcome);
                
                setTimeout(() => {
                    welcome.style.animation = 'slideUp 0.5s ease forwards';
                    setTimeout(() => welcome.remove(), 500);
                }, 2500);
            }, 1500);
            
        } else {
            // Desktop: ·∫©n zoom controls
            const zoomControls = document.querySelector('.camera-zoom-controls');
            if (zoomControls) {
                zoomControls.style.display = 'none';
            }
        }
    });

    // Th√™m CSS animations t·ªëi ∆∞u
    const mobileStyle = document.createElement('style');
    mobileStyle.textContent = `
        @keyframes slideDown {
            from { opacity: 0; transform: translateX(-50%) translateY(-20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }
        
        @keyframes slideUp {
            from { opacity: 1; transform: translateX(-50%) translateY(0); }
            to { opacity: 0; transform: translateX(-50%) translateY(-20px); }
        }
        
        /* Touch feedback t·ªëi ∆∞u */
        @media (max-width: 768px) {
            .btn:active, .filter-btn:active, .zoom-btn:active {
                transform: scale(0.95) !important;
            }
            
            /* T·ªëi ∆∞u scroll */
            body {
                -webkit-overflow-scrolling: touch;
                overscroll-behavior: contain;
            }
        }
    `;
    document.head.appendChild(mobileStyle);
    </script>
</body>
</html>